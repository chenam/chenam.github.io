{"title":"深拷贝 && 浅拷贝","date":"2019-01-23T06:04:05.000Z","slug":"深拷贝-浅拷贝","tags":["javascript"],"categories":["web前端"],"updated":"2020-10-12T06:28:01.119Z","content":"<blockquote>\n<p>这是开发过程中的一个小坑。有一个对象，希望得到他的拷贝对象，但并不希望改变他的本身。</p>\n</blockquote>\n<h3 id=\"浅拷贝\"><a href=\"#浅拷贝\" class=\"headerlink\" title=\"浅拷贝\"></a>浅拷贝</h3><p>可以用扩展运算符实现对象的浅拷贝。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'FungLeo'</span>,</span><br><span class=\"line\">  sex: <span class=\"string\">'man'</span>,</span><br><span class=\"line\">  old: <span class=\"string\">'18'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> &#123; ...obj2 &#125; = obj</span><br><span class=\"line\">obj.old = <span class=\"string\">'22'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj2)</span><br></pre></td></tr></table></figure>\n<p>不仅对象，数组也是很好用啊<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">'I'</span>, <span class=\"string\">'Love'</span> ,<span class=\"string\">'China'</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> [...arr2 ] = arr</span><br><span class=\"line\">arr[<span class=\"number\">0</span>] = <span class=\"string\">'You'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr2);</span><br></pre></td></tr></table></figure></p>\n<p>// 对象浅拷贝<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.assign(target, o2, o3, o4) <span class=\"comment\">// 将o234合并到target对象上，同名属性替换</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"深拷贝\"><a href=\"#深拷贝\" class=\"headerlink\" title=\"深拷贝\"></a>深拷贝</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 深拷贝</span></span><br><span class=\"line\">deepCopy(p, c) &#123;</span><br><span class=\"line\">　　　　<span class=\"keyword\">var</span> c = c || &#123;&#125;;</span><br><span class=\"line\">　　　　<span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> p) &#123;</span><br><span class=\"line\">　　　　　　<span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> p[i] === <span class=\"string\">'object'</span> &amp;&amp; p[i] !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">　　　　　　　　c[i] = (p[i].constructor === <span class=\"built_in\">Array</span>) ? [] : &#123;&#125;;</span><br><span class=\"line\">　　　　　　　　deepCopy(p[i], c[i]);</span><br><span class=\"line\">　　　　　　&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">　　　　　　　　　c[i] = p[i];</span><br><span class=\"line\">　　　　　　&#125;</span><br><span class=\"line\">　　　　&#125;</span><br><span class=\"line\">　　　　<span class=\"keyword\">return</span> c;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://blog.csdn.net/fungleo/article/details/54931379\" target=\"_blank\" rel=\"noopener\">引用出处</a></p>\n","prev":{"title":"vue 微信引导下载思路","slug":"vue-微信引导下载思路"},"next":{"title":"移动端图片上传-踩坑小记","slug":"移动端图片上传-踩坑小记"},"link":"http://yoursite.com/post/深拷贝-浅拷贝/"}