{"title":"深拷贝 && 浅拷贝","date":"2019-01-23T06:04:05.000Z","slug":"深拷贝-浅拷贝","tags":["javascript"],"categories":["web前端"],"updated":"2019-01-23T06:04:57.836Z","content":"<blockquote>\n<p>这是开发过程中的一个小坑。有一个对象，希望得到他的拷贝对象，但并不希望改变他的本身。</p>\n</blockquote>\n<p>从前会写一个方法</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 深拷贝</span><br><span class=\"line\">deepCopy(p, c) &#123;</span><br><span class=\"line\">　　　　var c = c || &#123;&#125;;</span><br><span class=\"line\">　　　　for (var i in p) &#123;</span><br><span class=\"line\">　　　　　　if (typeof p[i] === &apos;object&apos; &amp;&amp; p[i] !== null) &#123;</span><br><span class=\"line\">　　　　　　　　c[i] = (p[i].constructor === Array) ? [] : &#123;&#125;;</span><br><span class=\"line\">　　　　　　　　deepCopy(p[i], c[i]);</span><br><span class=\"line\">　　　　　　&#125; else &#123;</span><br><span class=\"line\">　　　　　　　　　c[i] = p[i];</span><br><span class=\"line\">　　　　　　&#125;</span><br><span class=\"line\">　　　　&#125;</span><br><span class=\"line\">　　　　return c;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>但是，现在，可以用扩展运算符实现对象的深拷贝。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var obj = &#123;</span><br><span class=\"line\">  name: &apos;FungLeo&apos;,</span><br><span class=\"line\">  sex: &apos;man&apos;,</span><br><span class=\"line\">  old: &apos;18&apos;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">var &#123; ...obj2 &#125; = obj</span><br><span class=\"line\">obj.old = &apos;22&apos;</span><br><span class=\"line\">console.log(obj)</span><br><span class=\"line\">console.log(obj2)</span><br></pre></td></tr></table></figure>\n<p>不仅对象，数组也是很好用啊<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var arr = [&apos;I&apos;, &apos;Love&apos; ,&apos;China&apos;];</span><br><span class=\"line\">var [...arr2 ] = arr</span><br><span class=\"line\">arr[0] = &apos;You&apos;</span><br><span class=\"line\">console.log(arr);</span><br><span class=\"line\">console.log(arr2);</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"http://blog.csdn.net/fungleo/article/details/54931379\" target=\"_blank\" rel=\"noopener\">引用出处</a></p>\n","next":{"title":"移动端图片上传-踩坑小记","slug":"移动端图片上传-踩坑小记"},"link":"http://yoursite.com/post/深拷贝-浅拷贝/"}