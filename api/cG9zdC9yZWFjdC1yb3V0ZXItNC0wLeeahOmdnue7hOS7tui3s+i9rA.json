{"title":"react-router 4.0 的非组件跳转","date":"2019-04-22T08:40:26.000Z","slug":"react-router-4-0-的非组件跳转","tags":["react","小功能"],"categories":["web前端"],"updated":"2020-10-12T06:28:01.118Z","content":"<p>这次搭的脚手架用上了react-router 4.x,组件内的路由跳转可以用 <code>widthRouter</code>实现，非组件内的可以用以下方法</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// src/history.js</span><br><span class=\"line\"></span><br><span class=\"line\">import &#123; createBrowserHistory &#125; from &apos;history&apos;;</span><br><span class=\"line\"></span><br><span class=\"line\">export default createBrowserHistory();</span><br></pre></td></tr></table></figure>\n<p>用 <code>import { Router }</code> 代替 <code>import { BrowserRouter as Router })</code>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// src/index.jsx</span><br><span class=\"line\"></span><br><span class=\"line\">// ...</span><br><span class=\"line\">import &#123; Router, Route, Link &#125; from &apos;react-router-dom&apos;;</span><br><span class=\"line\">import history from &apos;./history&apos;;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;Router history=&#123;history&#125;&gt;</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;ul&gt;</span><br><span class=\"line\">          &lt;li&gt;&lt;Link to=&quot;/&quot;&gt;Home&lt;/Link&gt;&lt;/li&gt;</span><br><span class=\"line\">          &lt;li&gt;&lt;Link to=&quot;/login&quot;&gt;Login&lt;/Link&gt;&lt;/li&gt;</span><br><span class=\"line\">        &lt;/ul&gt;</span><br><span class=\"line\">        &lt;Route exact path=&quot;/&quot; component=&#123;HomePage&#125; /&gt;</span><br><span class=\"line\">        &lt;Route path=&quot;/login&quot; component=&#123;LoginPage&#125; /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Router&gt;</span><br><span class=\"line\">  &lt;/Provider&gt;,</span><br><span class=\"line\">  document.getElementById(&apos;root&apos;),</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>需要跳转的地方</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// src/actions/userActionCreators.js</span><br><span class=\"line\"></span><br><span class=\"line\">// ...</span><br><span class=\"line\">import history from &apos;../history&apos;;</span><br><span class=\"line\"></span><br><span class=\"line\">export function login(credentials) &#123;</span><br><span class=\"line\">  return function (dispatch) &#123;</span><br><span class=\"line\">    return loginRemotely(credentials)</span><br><span class=\"line\">      .then((response) =&gt; &#123;</span><br><span class=\"line\">        // ...</span><br><span class=\"line\">        history.push(&apos;/&apos;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/42701129/how-to-push-to-history-in-react-router-v4\" target=\"_blank\" rel=\"noopener\">参考</a></p>\n","prev":{"title":"extends Component 和 无状态组件","slug":"extends-Component-和-无状态组件"},"next":{"title":"2019 月度小结：4月","slug":"2019-月度小结：4月"},"link":"http://yoursite.com/post/react-router-4-0-的非组件跳转/"}